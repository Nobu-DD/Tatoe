<%= turbo_frame_tag dom_id(comment) do %>
<% if comment.user_id == current_user&.id %>
<div id=<%="comment_#{comment.id}_flash"%>></div>
<div class="chat chat-end">
  <div class="chat-image avatar">
    <div class="w-10 rounded-full">
      <%= comment.user.decorate.avatar_display? %>
    </div>
  </div>
  <div class="chat-header space-x-2">
    <span><%= comment.user.name %></span>
    <span><%= comment.decorate.comment_posting_time %></span>
  </div>
  <div class="chat-bubble chat-bubble-success mb-1">
    <%= simple_format(comment.body) %>
  </div>
  <div class="flex space-x-2 my-1">
    <div class="flex items-center space-x-1 mr-4">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="gray" class="size-[1.2em]">
        <path stroke-linecap="round" stroke-linejoin="round" d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z" />
      </svg>
      <span class="text-gray-400 text-lg"><%= "#{comment.likes.size}" %></span>
    </div>
    <%= button_to "編集", edit_topic_answer_comment_path(@topic, @answer, comment), method: :get, class: "btn btn-outline btn-info btn-sm" %>
    <%= button_to "削除", topic_answer_comment_path(@topic, @answer, comment), method: :delete, data: { turbo_method: :delete, turbo_confirm: "本当に削除しますか？", turbo_submits_with: "削除中..."}, class: "btn btn-outline btn-error btn-sm"  %>
  </div>
</div>
<% else %>
<div class=" chat chat-start">
  <div class="chat-image avatar">
    <div class="w-10 rounded-full">
      <%= comment.user.decorate.avatar_display? %>
    </div>
  </div>
  <div class="chat-header">
    <%= comment.user.name %>
  </div>
  <div class="flex items-end space-x-2">
    <div class="chat-bubble chat-bubble-accent">
      <%= comment.body %>
    </div>
    <div class="flex items-end space-x-1">
      <% if user_signed_in? %>
      <% if current_user.likes.exists?(likeable_type: "Comment", likeable_id: comment.id) %>
      <%= render "likes/unlike", object: comment, type: "Comment" %>
      <% else %>
      <%= render "likes/like", object: comment, type: "Comment" %>
      <% end %>
      <% else %>
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 1 25 25" stroke-width="2.5" stroke="gray" class="size-[1.2em]">
        <path stroke-linecap="round" stroke-linejoin="round" d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z" />
      </svg>
      <% end %>
      <span class="text-gray-400" , id="<%="Comment_#{comment.id}_size"%>"><%= "#{comment.likes.size}" %></span>
    </div>
  </div>
  <%= comment.decorate.comment_posting_time %>
</div>
<% end %>
<% end %>